(in-package #:mfiano.graphics.image.test)

(diag "~&From xyY (one way)")
(define-test/one-way (xyy 0.22882279463372762d0 0.2756865588051985d0 0.49140627521213487d0)
  (xyz
   (:a (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:b (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:c (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:d50 (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:d55 (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:d65 (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:d75 (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0))
   (:e (0.4078724682186829d0 0.4914062752121349d0 0.8832030625079514d0)))
  (lab
   (:a (75.53873122580802d0 -35.18734271099494d0 -112.96850171876093d0))
   (:b (75.53873122580802d0 -22.63094535806959d0 -44.49732407160629d0))
   (:c (75.53873122580802d0 -21.34325131867709d0 -23.64835136598391d0))
   (:d50 (75.53873122580802d0 -19.227148766609194d0 -46.7558543322953d0))
   (:d55 (75.53873122580802d0 -18.260055237802497d0 -39.36606483007681d0))
   (:d65 (75.53873122580802d0 -17.421429221450513d0 -28.69261957628153d0))
   (:d75 (75.53873122580802d0 -17.32793431950652d0 -21.44430265976247d0))
   (:e (75.53873122580802d0 -23.75916286870483d0 -34.06364765330996d0)))
  (lch-ab
   (:a (75.53873122580802d0 118.32172863697818d0 252.6992729247806d0))
   (:b (75.53873122580802d0 49.92165399236572d0 243.04251411787567d0))
   (:c (75.53873122580802d0 31.855594472262553d0 227.93292787510006d0))
   (:d50 (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:d55 (75.53873122580802d0 43.39489229729011d0 245.11564506881655d0))
   (:d65 (75.53873122580802d0 33.5674338350018d0 238.7349403115105d0))
   (:d75 (75.53873122580802d0 27.57019086521941d0 231.06027292267163d0))
   (:e (75.53873122580802d0 41.53107164124821d0 235.1044884123536d0)))
  (luv
   (:a (75.53873122580802d0 -97.72898419185125d0 -98.4007057058269d0))
   (:b (75.53873122580802d0 -56.19922575768809d0 -59.97735839019258d0))
   (:c (75.53873122580802d0 -43.64362945761909d0 -36.13714004655688d0))
   (:d50 (75.53873122580802d0 -51.76629354771912d0 -62.83364266204326d0))
   (:d55 (75.53873122580802d0 -47.12253530043449d0 -55.62779021336321d0))
   (:d65 (75.53873122580802d0 -40.640488226293215d0 -43.445791931507735d0))
   (:d75 (75.53873122580802d0 -36.42375149702008d0 -33.79798139714239d0))
   (:e (75.53873122580802d0 -53.10885770821632d0 -48.701521684779d0)))
  (lch-uv
   (:a (75.53873122580802d0 138.68544709008177d0 225.1962306538026d0))
   (:b (75.53873122580802d0 82.19267908536135d0 226.86263687938836d0))
   (:c (75.53873122580802d0 56.66267980759842d0 219.62492394821513d0))
   (:d50 (75.53873122580802d0 81.41139845162942d0 230.51616366762875d0))
   (:d55 (75.53873122580802d0 72.90393938027384d0 229.73192426936234d0))
   (:d65 (75.53873122580802d0 59.49105915872855d0 226.91080481251424d0))
   (:d75 (75.53873122580802d0 49.68896476722226d0 222.85856202283315d0))
   (:e (75.53873122580802d0 72.05823326646697d0 222.5212331959971d0))))

(diag "~&From Lab (one way)")
(define-test/one-way (lab 75.53873122580802d0 -19.227148766609194d0 -46.7558543322953d0)
  (xyz
   (:a (0.4646634290888609d0 0.4914062752121346d0 0.3808390173493614d0))
   (:b (0.4191733805181906d0 0.4914062752121346d0 0.913112075909402d0))
   (:c (0.4148496047266962d0 0.4914062752121346d0 1.2653673601714603d0))
   (:d50 (0.4078724682186826d0 0.4914062752121346d0 0.8832030625079509d0))
   (:d55 (0.4047358668668979d0 0.4914062752121346d0 0.9862652653842351d0))
   (:d65 (0.4020419125250643d0 0.4914062752121346d0 1.1654554890788127d0))
   (:d75 (0.4017430577170813d0 0.4914062752121346d0 1.3126150642796302d0))
   (:e (0.4230111926237773d0 0.4914062752121346d0 1.070304904737206d0)))
  (xyy
   (:a (0.3475655604335154d0 0.3675690548308447d0 0.4914062752121346d0))
   (:b (0.2298488133963854d0 0.2694568751322345d0 0.4914062752121346d0))
   (:c (0.1910320340399503d0 0.2262852349964616d0 0.4914062752121346d0))
   (:d50 (0.2288227946337276d0 0.2756865588051985d0 0.4914062752121346d0))
   (:d55 (0.2150097079209436d0 0.2610520301098654d0 0.4914062752121346d0))
   (:d65 (0.1952698987583535d0 0.2386737566917502d0 0.4914062752121346d0))
   (:d75 (0.1821332587584799d0 0.2227827576843454d0 0.4914062752121346d0))
   (:e (0.2131336848263363d0 0.2475944656053052d0 0.4914062752121346d0)))
  (lch-ab
   (:a (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:b (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:c (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:d50 (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:d55 (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:d65 (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:d75 (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0))
   (:e (75.53873122580802d0 50.55485302160554d0 247.64633869180082d0)))
  (luv
   (:a (75.53873122580802d0 -48.06647922284468d0 -31.128361985490304d0))
   (:b (75.53873122580802d0 -53.457494213237986d0 -63.9731310239557d0))
   (:c (75.53873122580802d0 -56.57742711521854d0 -77.6127021555777d0))
   (:d50 (75.53873122580802d0 -51.766293547719144d0 -62.8336426620432d0))
   (:d55 (75.53873122580802d0 -52.650318651855756d0 -67.5012347787811d0))
   (:d65 (75.53873122580802d0 -54.136470213182555d0 -74.52175910689465d0))
   (:d75 (75.53873122580802d0 -55.29923641875775d0 -79.39255686902568d0))
   (:e (75.53873122580802d0 -55.75249415994643d0 -70.51564275112554d0)))
  (lch-uv
   (:a (75.53873122580802d0 57.26570827973646d0 212.92752210631758d0))
   (:b (75.53873122580802d0 83.36825043484225d0 230.11705415921782d0))
   (:c (75.53873122580802d0 96.04549336053348d0 233.90902734433612d0))
   (:d50 (75.53873122580802d0 81.41139845162938d0 230.51616366762872d0))
   (:d55 (75.53873122580802d0 85.60649946588212d0 232.0461092395156d0))
   (:d65 (75.53873122580802d0 92.10998853288842d0 234.00340040011827d0))
   (:d75 (75.53873122580802d0 96.75320994519582d0 235.14166098054397d0))
   (:e (75.53873122580802d0 89.89325045663453d0 231.6686900456426d0))))

(diag "~&From LCHab (one way)")
(define-test/one-way (lch-ab 75.53873122580802d0 50.55485302160554d0 247.64633869180082d0)
  (xyz
   (:a (0.4646634290888607d0 0.4914062752121346d0 0.3808390173493614d0))
   (:b (0.4191733805181904d0 0.4914062752121346d0 0.913112075909402d0))
   (:c (0.414849604726696d0 0.4914062752121346d0 1.2653673601714603d0))
   (:d50 (0.4078724682186824d0 0.4914062752121346d0 0.8832030625079509d0))
   (:d55 (0.4047358668668977d0 0.4914062752121346d0 0.9862652653842351d0))
   (:d65 (0.4020419125250641d0 0.4914062752121346d0 1.1654554890788127d0))
   (:d75 (0.4017430577170811d0 0.4914062752121346d0 1.3126150642796302d0))
   (:e (0.4230111926237771d0 0.4914062752121346d0 1.070304904737206d0)))
  (xyy
   (:a (0.3475655604335153d0 0.3675690548308448d0 0.4914062752121346d0))
   (:b (0.2298488133963853d0 0.2694568751322346d0 0.4914062752121346d0))
   (:c (0.1910320340399501d0 0.2262852349964616d0 0.4914062752121346d0))
   (:d50 (0.2288227946337275d0 0.2756865588051985d0 0.4914062752121346d0))
   (:d55 (0.2150097079209436d0 0.2610520301098654d0 0.4914062752121346d0))
   (:d65 (0.1952698987583534d0 0.2386737566917502d0 0.4914062752121346d0))
   (:d75 (0.1821332587584799d0 0.2227827576843455d0 0.4914062752121346d0))
   (:e (0.2131336848263362d0 0.2475944656053052d0 0.4914062752121346d0)))
  (lab
   (:a (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:b (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:c (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:d50 (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:d55 (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:d65 (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:d75 (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0))
   (:e (75.53873122580802d0 -19.227148766609226d0 -46.755854332295286d0)))
  (luv
   (:a (75.53873122580802d0 -48.06647922284482d0 -31.128361985490304d0))
   (:b (75.53873122580802d0 -53.45749421323804d0 -63.973131023955645d0))
   (:c (75.53873122580802d0 -56.577427115218626d0 -77.6127021555777d0))
   (:d50 (75.53873122580802d0 -51.7662935477192d0 -62.8336426620432d0))
   (:d55 (75.53873122580802d0 -52.65031865185584d0 -67.5012347787811d0))
   (:d65 (75.53873122580802d0 -54.136470213182605d0 -74.52175910689465d0))
   (:d75 (75.53873122580802d0 -55.299236418757836d0 -79.39255686902568d0))
   (:e (75.53873122580802d0 -55.75249415994649d0 -70.51564275112554d0)))
  (lch-uv
   (:a (75.53873122580802d0 57.26570827973658d0 212.9275221063175d0))
   (:b (75.53873122580802d0 83.36825043484225d0 230.11705415921776d0))
   (:c (75.53873122580802d0 96.04549336053353d0 233.90902734433607d0))
   (:d50 (75.53873122580802d0 81.41139845162942d0 230.5161636676287d0))
   (:d55 (75.53873122580802d0 85.60649946588218d0 232.0461092395156d0))
   (:d65 (75.53873122580802d0 92.10998853288845d0 234.00340040011827d0))
   (:d75 (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:e (75.53873122580802d0 89.89325045663456d0 231.66869004564256d0))))

(diag "~&From LCHuv (one way)")
(define-test/one-way (lch-uv 75.53873122580802d0 96.75320994519588d0 235.14166098054395d0)
  (xyz
   (:a (0.4977994262315076d0 0.4914062752121346d0 0.7014912333136016d0))
   (:b (0.4303234736322018d0 0.4914062752121346d0 1.0457034618380137d0))
   (:c (0.4206148955293629d0 0.4914062752121346d0 1.2818577207956032d0))
   (:d50 (0.4149934567420646d0 0.4914062752121346d0 1.0247706115577526d0))
   (:d55 (0.4095335840231958d0 0.4914062752121346d0 1.0930193761304174d0))
   (:d65 (0.4038096288330194d0 0.4914062752121346d0 1.2129519638339352d0))
   (:d75 (0.401743057717081d0 0.4914062752121346d0 1.3126150642796297d0))
   (:e (0.4340442381273014d0 0.4914062752121346d0 1.1510396774652607d0)))
  (xyy
   (:a (0.2944344524425269d0 0.2906530822348077d0 0.4914062752121346d0))
   (:b (0.2187232945422101d0 0.2497702450807486d0 0.4914062752121346d0))
   (:c (0.1917220212801568d0 0.2239897002098597d0 0.4914062752121346d0))
   (:d50 (0.2148922067575735d0 0.2544603467338268d0 0.4914062752121346d0))
   (:d55 (0.2053871396965023d0 0.2464475032870955d0 0.4914062752121346d0))
   (:d65 (0.1915452915233311d0 0.2330963689843689d0 0.4914062752121346d0))
   (:d75 (0.1821332587584799d0 0.2227827576843455d0 0.4914062752121346d0))
   (:e (0.2090278297722646d0 0.236652346054041d0 0.4914062752121346d0)))
  (lab
   (:a (75.53873122580802d0 -10.509233687645835d0 -92.95452828657218d0))
   (:b (75.53873122580802d0 -15.928222299036232d0 -56.21413068471386d0))
   (:c (75.53873122580802d0 -17.496420632806874d0 -47.640727466822355d0))
   (:d50 (75.53873122580802d0 -17.05542379066427d0 -57.14955606302363d0))
   (:d55 (75.53873122580802d0 -17.74989828263057d0 -53.88582145310015d0))
   (:d65 (75.53873122580802d0 -18.677854350226564d0 -49.49807224307394d0))
   (:d75 (75.53873122580802d0 -19.227148766609304d0 -46.75585433229526d0))
   (:e (75.53873122580802d0 -15.99192087968665d0 -51.77563841141699d0)))
  (lch-ab
   (:a (75.53873122580802d0 93.54671732177832d0 263.5496555509266d0))
   (:b (75.53873122580802d0 58.42719190792591d0 254.17997080251075d0))
   (:c (75.53873122580802d0 50.751981720206274d0 249.83385535569997d0))
   (:d50 (75.53873122580802d0 59.64024848103701d0 253.38305893984784d0))
   (:d55 (75.53873122580802d0 56.73394612327896d0 251.7682045841584d0))
   (:d65 (75.53873122580802d0 52.904833417267696d0 249.32624751014976d0))
   (:d75 (75.53873122580802d0 50.55485302160554d0 247.64633869180068d0))
   (:e (75.53873122580802d0 54.189097301320274d0 252.83567125216013d0)))
  (luv
   (:a (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:b (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:c (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:d50 (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:d55 (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:d65 (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:d75 (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))
   (:e (75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0))))

(diag "~&From Luv (one way)")
(define-test/one-way (luv 75.53873122580802d0 -55.29923641875782d0 -79.3925568690257d0)
  (xyz
   (:a (0.4977994262315076d0 0.4914062752121346d0 0.7014912333136016d0))
   (:b (0.4303234736322018d0 0.4914062752121346d0 1.0457034618380137d0))
   (:c (0.4206148955293629d0 0.4914062752121346d0 1.2818577207956032d0))
   (:d50 (0.4149934567420646d0 0.4914062752121346d0 1.0247706115577526d0))
   (:d55 (0.4095335840231958d0 0.4914062752121346d0 1.0930193761304174d0))
   (:d65 (0.4038096288330194d0 0.4914062752121346d0 1.2129519638339352d0))
   (:d75 (0.401743057717081d0 0.4914062752121346d0 1.3126150642796297d0))
   (:e (0.4340442381273014d0 0.4914062752121346d0 1.1510396774652607d0)))
  (xyy
   (:a (0.2944344524425269d0 0.2906530822348077d0 0.4914062752121346d0))
   (:b (0.2187232945422101d0 0.2497702450807486d0 0.4914062752121346d0))
   (:c (0.1917220212801568d0 0.2239897002098597d0 0.4914062752121346d0))
   (:d50 (0.2148922067575735d0 0.2544603467338268d0 0.4914062752121346d0))
   (:d55 (0.2053871396965023d0 0.2464475032870955d0 0.4914062752121346d0))
   (:d65 (0.1915452915233311d0 0.2330963689843689d0 0.4914062752121346d0))
   (:d75 (0.1821332587584799d0 0.2227827576843455d0 0.4914062752121346d0))
   (:e (0.2090278297722646d0 0.236652346054041d0 0.4914062752121346d0)))
  (lab
   (:a (75.53873122580802d0 -10.509233687645835d0 -92.95452828657218d0))
   (:b (75.53873122580802d0 -15.928222299036232d0 -56.21413068471386d0))
   (:c (75.53873122580802d0 -17.496420632806874d0 -47.640727466822355d0))
   (:d50 (75.53873122580802d0 -17.05542379066427d0 -57.14955606302363d0))
   (:d55 (75.53873122580802d0 -17.74989828263057d0 -53.88582145310015d0))
   (:d65 (75.53873122580802d0 -18.677854350226564d0 -49.49807224307394d0))
   (:d75 (75.53873122580802d0 -19.227148766609304d0 -46.75585433229526d0))
   (:e (75.53873122580802d0 -15.99192087968665d0 -51.77563841141699d0)))
  (lch-ab
   (:a (75.53873122580802d0 93.54671732177832d0 263.5496555509266d0))
   (:b (75.53873122580802d0 58.42719190792591d0 254.17997080251075d0))
   (:c (75.53873122580802d0 50.751981720206274d0 249.83385535569997d0))
   (:d50 (75.53873122580802d0 59.64024848103701d0 253.38305893984784d0))
   (:d55 (75.53873122580802d0 56.73394612327896d0 251.7682045841584d0))
   (:d65 (75.53873122580802d0 52.904833417267696d0 249.32624751014976d0))
   (:d75 (75.53873122580802d0 50.55485302160554d0 247.64633869180068d0))
   (:e (75.53873122580802d0 54.189097301320274d0 252.83567125216013d0)))
  (lch-uv
   (:a (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:b (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:c (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:d50 (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:d55 (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:d65 (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:d75 (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))
   (:e (75.53873122580802d0 96.75320994519588d0 235.14166098054395d0))))

;; (diag "From XYZ (round trip)")
;; (test-round-trip i:xyz i:xyy)
;; (test-round-trip i:xyz i:lab)
;; (test-round-trip i:xyz i:lch-ab)
;; (test-round-trip i:xyz i:lch-uv)
;; (test-round-trip i:xyz i:luv)
;; (test-round-trip i:xyz (i:rgb :adobe-rgb))
;; (test-round-trip i:xyz (i:rgb :adobe-wide-gamut-rgb))
;; (test-round-trip i:xyz (i:rgb :apple-rgb))
;; (test-round-trip i:xyz (i:rgb :best-rgb))
;; (test-round-trip i:xyz (i:rgb :beta-rgb))
;; (test-round-trip i:xyz (i:rgb :bruce-rgb))
;; (test-round-trip i:xyz (i:rgb :bt2020))
;; (test-round-trip i:xyz (i:rgb :bt470-ntsc))
;; (test-round-trip i:xyz (i:rgb :bt470-pal/secam))
;; (test-round-trip i:xyz (i:rgb :bt709))
;; (test-round-trip i:xyz (i:rgb :cie-rgb))
;; (test-round-trip i:xyz (i:rgb :colormatch-rgb))
;; (test-round-trip i:xyz (i:rgb :dci-p3))
;; (test-round-trip i:xyz (i:rgb :dci-p3+))
;; (test-round-trip i:xyz (i:rgb :don-rgb-4))
;; (test-round-trip i:xyz (i:rgb :eci-rgb-v2))
;; (test-round-trip i:xyz (i:rgb :ekta-space-ps5))
;; (test-round-trip i:xyz (i:rgb :prophoto-rgb))
;; (test-round-trip i:xyz (i:rgb :simple-srgb))
;; (test-round-trip i:xyz (i:rgb :smpte-c-rgb))
;; (test-round-trip i:xyz (i:rgb :srgb))

;;;

;; (diag "From xyY (round trip)")
;; (test-round-trip i:xyy i:xyz)
;; (test-round-trip i:xyy i:lab)
;; (test-round-trip i:xyy i:lch-ab)
;; (test-round-trip i:xyy i:lch-uv)
;; (test-round-trip i:xyy i:luv)
;; (test-round-trip i:xyy (i:rgb :adobe-rgb))
;; (test-round-trip i:xyy (i:rgb :adobe-wide-gamut-rgb))
;; (test-round-trip i:xyy (i:rgb :apple-rgb))
;; (test-round-trip i:xyy (i:rgb :best-rgb))
;; (test-round-trip i:xyy (i:rgb :beta-rgb))
;; (test-round-trip i:xyy (i:rgb :bruce-rgb))
;; (test-round-trip i:xyy (i:rgb :bt2020))
;; (test-round-trip i:xyy (i:rgb :bt470-ntsc))
;; (test-round-trip i:xyy (i:rgb :bt470-pal/secam))
;; (test-round-trip i:xyy (i:rgb :bt709))
;; (test-round-trip i:xyy (i:rgb :cie-rgb))
;; (test-round-trip i:xyy (i:rgb :colormatch-rgb))
;; (test-round-trip i:xyy (i:rgb :dci-p3))
;; (test-round-trip i:xyy (i:rgb :dci-p3+))
;; (test-round-trip i:xyy (i:rgb :don-rgb-4))
;; (test-round-trip i:xyy (i:rgb :eci-rgb-v2))
;; (test-round-trip i:xyy (i:rgb :ekta-space-ps5))
;; (test-round-trip i:xyy (i:rgb :prophoto-rgb))
;; (test-round-trip i:xyy (i:rgb :simple-srgb))
;; (test-round-trip i:xyy (i:rgb :smpte-c-rgb))
;; (test-round-trip i:xyy (i:rgb :srgb))

;;;

;; (diag "From Lab (round trip)")
;; (test-round-trip i:lab i:xyz)

;; broken
;; (test-round-trip i:lab i:xyy)

;; (test-round-trip i:lab i:lch-ab)
;; (test-round-trip i:lab i:lch-uv)
;; (test-round-trip i:lab i:luv)
;; (test-round-trip i:lab (i:rgb :adobe-rgb))

;; broken
;; (test-round-trip i:lab (i:rgb :adobe-wide-gamut-rgb))

;; (test-round-trip i:lab (i:rgb :apple-rgb))

;; broken
;; (test-round-trip i:lab (i:rgb :best-rgb))
;; (test-round-trip i:lab (i:rgb :beta-rgb))

;; (test-round-trip i:lab (i:rgb :bruce-rgb))
;; (test-round-trip i:lab (i:rgb :bt2020))

;; broken
;; (test-round-trip i:lab (i:rgb :bt470-ntsc))

;; (test-round-trip i:lab (i:rgb :bt470-pal/secam))
;; (test-round-trip i:lab (i:rgb :bt709))

;; broken
;; (test-round-trip i:lab (i:rgb :cie-rgb))
;; (test-round-trip i:lab (i:rgb :colormatch-rgb))
;; (test-round-trip i:lab (i:rgb :dci-p3))
;; (test-round-trip i:lab (i:rgb :dci-p3+))
;; (test-round-trip i:lab (i:rgb :don-rgb-4))
;; (test-round-trip i:lab (i:rgb :eci-rgb-v2))
;; (test-round-trip i:lab (i:rgb :ekta-space-ps5))
;; (test-round-trip i:lab (i:rgb :prophoto-rgb))

;; (test-round-trip i:lab (i:rgb :simple-srgb))
;; (test-round-trip i:lab (i:rgb :smpte-c-rgb))
;; (test-round-trip i:lab (i:rgb :srgb))

;; (diag "From LCHab (round trip)")

;; (test-round-trip i:lch-ab i:xyz)

;; broken
;; (test-round-trip i:lch-ab i:xyy)

;; (test-round-trip i:lch-ab i:lab)
;; (test-round-trip i:lch-ab i:lch-uv)
;; (test-round-trip i:lch-ab i:luv)
;; (test-round-trip i:lch-ab (i:rgb :adobe-rgb))

;; broken
;; (test-round-trip i:lch-ab (i:rgb :adobe-wide-gamut-rgb))

;; (test-round-trip i:lch-ab (i:rgb :apple-rgb))

;; broken
;; (test-round-trip i:lch-ab (i:rgb :best-rgb))
;; (test-round-trip i:lch-ab (i:rgb :beta-rgb))

;; (test-round-trip i:lch-ab (i:rgb :bruce-rgb))
;; (test-round-trip i:lch-ab (i:rgb :bt2020))

;; broken
;; (test-round-trip i:lch-ab (i:rgb :bt470-ntsc))

;; (test-round-trip i:lch-ab (i:rgb :bt470-pal/secam))
;; (test-round-trip i:lch-ab (i:rgb :bt709))

;; broken
;; (test-round-trip i:lch-ab (i:rgb :cie-rgb))
;; (test-round-trip i:lch-ab (i:rgb :colormatch-rgb))
;; (test-round-trip i:lch-ab (i:rgb :dci-p3))
;; (test-round-trip i:lch-ab (i:rgb :dci-p3+))
;; (test-round-trip i:lch-ab (i:rgb :don-rgb-4))
;; (test-round-trip i:lch-ab (i:rgb :eci-rgb-v2))
;; (test-round-trip i:lch-ab (i:rgb :ekta-space-ps5))
;; (test-round-trip i:lch-ab (i:rgb :prophoto-rgb))

;; (test-round-trip i:lch-ab (i:rgb :simple-srgb))
;; (test-round-trip i:lch-ab (i:rgb :smpte-c-rgb))
;; (test-round-trip i:lch-ab (i:rgb :srgb))

;; (diag "From LCHuv (round trip)")

;; (test-round-trip i:lch-uv i:xyz)
;; (test-round-trip i:lch-uv i:xyy)
;; (test-round-trip i:lch-uv i:lab)
;; (test-round-trip i:lch-uv i:lch-ab)
;; (test-round-trip i:lch-uv i:luv)

;; broken
;; (test-round-trip i:lch-uv (i:rgb :adobe-rgb))
;; (test-round-trip i:lch-uv (i:rgb :adobe-wide-gamut-rgb))
;; (test-round-trip i:lch-uv (i:rgb :apple-rgb))
;; (test-round-trip i:lch-uv (i:rgb :best-rgb))
;; (test-round-trip i:lch-uv (i:rgb :beta-rgb))
;; (test-round-trip i:lch-uv (i:rgb :bruce-rgb))
;; (test-round-trip i:lch-uv (i:rgb :bt2020))
;; (test-round-trip i:lch-uv (i:rgb :bt470-ntsc))
;; (test-round-trip i:lch-uv (i:rgb :bt470-pal/secam))
;; (test-round-trip i:lch-uv (i:rgb :bt709))

;; (test-round-trip i:lch-uv (i:rgb :cie-rgb))

;; broken
;; (test-round-trip i:lch-uv (i:rgb :colormatch-rgb))
;; (test-round-trip i:lch-uv (i:rgb :dci-p3))
;; (test-round-trip i:lch-uv (i:rgb :dci-p3+))
;; (test-round-trip i:lch-uv (i:rgb :don-rgb-4))
;; (test-round-trip i:lch-uv (i:rgb :eci-rgb-v2))
;; (test-round-trip i:lch-uv (i:rgb :ekta-space-ps5))
;; (test-round-trip i:lch-uv (i:rgb :prophoto-rgb))
;; (test-round-trip i:lch-uv (i:rgb :simple-srgb))
;; (test-round-trip i:lch-uv (i:rgb :smpte-c-rgb))
;; (test-round-trip i:lch-uv (i:rgb :srgb))

;; (diag "From Luv (round trip)")

;; (test-round-trip i:luv i:xyz)
;; (test-round-trip i:luv i:xyy)
;; (test-round-trip i:luv i:lab)
;; (test-round-trip i:luv i:lch-ab)
;; (test-round-trip i:luv i:lch-uv)

;; broken
;; (test-round-trip i:luv (i:rgb :adobe-rgb))
;; (test-round-trip i:luv (i:rgb :adobe-wide-gamut-rgb))
;; (test-round-trip i:luv (i:rgb :apple-rgb))
;; (test-round-trip i:luv (i:rgb :best-rgb))
;; (test-round-trip i:luv (i:rgb :beta-rgb))
;; (test-round-trip i:luv (i:rgb :bruce-rgb))
;; (test-round-trip i:luv (i:rgb :bt2020))
;; (test-round-trip i:luv (i:rgb :bt470-ntsc))
;; (test-round-trip i:luv (i:rgb :bt470-pal/secam))
;; (test-round-trip i:luv (i:rgb :bt709))

;; (test-round-trip i:luv (i:rgb :cie-rgb))

;; broken
;; (test-round-trip i:luv (i:rgb :colormatch-rgb))
;; (test-round-trip i:luv (i:rgb :dci-p3))
;; (test-round-trip i:luv (i:rgb :dci-p3+))
;; (test-round-trip i:luv (i:rgb :don-rgb-4))
;; (test-round-trip i:luv (i:rgb :eci-rgb-v2))
;; (test-round-trip i:luv (i:rgb :ekta-space-ps5))
;; (test-round-trip i:luv (i:rgb :prophoto-rgb))
;; (test-round-trip i:luv (i:rgb :simple-srgb))
;; (test-round-trip i:luv (i:rgb :smpte-c-rgb))
;; (test-round-trip i:luv (i:rgb :srgb))

(finalize)
